
<!DOCTYPE html>
<html lang = "en - US">
<head>
<title>Multicomplex Derivatives</title>
<meta charset = "UTF-8">
<meta name = "keywords" content = "HTML, CSS, JavaScript">
<meta name = "author" content = "MULTICOMPLEX">
<style>

div.a {
line-height: normal;
font-family: "Consolas MS";
font-size: 22px;
}

h1 {
font-family: "Consolas MS";
font-size: 26px;
}

h2 {
font-size: 20px;
}


body {background-color: rgb(0, 43, 54);
color: rgb(238, 232, 213);}

.slider
{
   width: 1000px;
}

.slidecontainer {
font-size: 25px;
font-family: "Consolas MS";
  width: 100%;
  opacity: 1;
}

.button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 13px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
}

.btn-primary {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 4px 4px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  cursor: pointer;
}

.form-control{
  background-color: #4CAF50;
  border: none;
  color: white;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
}

.dropbtn {
  background-color: #4CAF50;
  color: white;
  padding: 4px;
  font-size: 16px;
  border: none;
}


</style>
</head>

<link rel="shortcut icon" href="android-chrome-512x512.png" type="image/x-icon" />

<body>
	<h1>Derivatives, using Multicomplex Numbers -> C++ Template metaprogramming, WebAssembly :</h1> 
</body>


 <font size="5px">
 <div id="mylog"></div>
   <script>

	let myConsoleLog = console.log;
	console.log = (...args) => {
    args.map(arg => document.querySelector("#mylog").innerHTML += arg + '<br>')
	
 }
  //console.log = myConsoleLog;
</script>
 </font>
 
   <script> 
 function time_event(event) {
	var t0 = performance.now()
	//do something	
	var t1 = performance.now()
	console.log("Call to doSomething took " + (t1 - t0) + " milliseconds.")
}
    </script>
	
 <head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
</head>

<script src='jQuery v3.6.0.js'></script>


 <body>
	 <div id='graph1' style="background-color: rgb(0, 43, 54); width: 1000px; height:1000px"></div>
	
	<h1 id="pagetitle"><!-- Sliders --></h1>
	
	<div class="slidecontainer">
	<span id="demo1"></span>
	<input type="range" min="-1000" max="1000" value="400" step="1" class="slider" id="myRange1">
	<br>
	<span id="demo2"></span>
	<input type="range" min="-1000" max="1000" value="-500" step="1" class="slider" id="myRange2">
	</div>
	
	<br>
	
	<script>
	
				// Create anchor element. 
                var a = document.createElement('a');  
                
				 
                // Create the text node for anchor element. 
                var link = document.createTextNode("MÃ¶bius transformation"); 

                // Append the text node to anchor element. 
				a.appendChild(link);
				a.style.fontSize = "25px"; 
				a.style.color = "rgb(238, 232, 213)";
				
				
                // Set the title. 
                //a.title = "  ";  
                  
                // Set the href property. 
                a.href = 'https://en.wikipedia.org/wiki/M%C3%B6bius_transformation';  
                  
                // Append the anchor element to the body. 
                document.body.appendChild(a);  
				
	</script>
	

<br><br>

<script src="derivatives.js"></script>


<select id="change_formula1" class="dropbtn">
    
	<option value="1" selected>z</option>
	<option value="2">log(z)</option>
    <option value="3">sqrt(z)</option>
    <option value="4">sin(z)</option>
	<option value="5">csc(z)</option>
	<option value="6">cos(z)</option>
	<option value="7">tan(z)</option>
	<option value="8">sinh(z)</option>
	<option value="9">cosh(z)</option>
	<option value="10">tanh(z)</option>
	<option value="11">asin(z)</option>
	<option value="12">acos(z)</option>
	<option value="13">atan(z)</option>
	<option value="14">asinh(z)</option>
	<option value="15">acosh(z)</option>
	<option value="16">atanh(z)</option>
	<option value="17">1 / (1 - z^2) = d^1/dz^1(atanh(z))</option>
	
	<option value="18">exp(z)</option>
	<option value="19">gamma(z)</option>
	<option value="20">LambertW(0,z)</option>
	<option value="21">erf(z)</option>
	<option value="22">Riemann Zeta(z)</option>
	
	<option value="23">d^1/dz^1(z)</option>
	<option value="24">d^1/dz^1(log(z))</option>
    <option value="25">d^1/dz^1(sqrt(z))</option>
    <option value="26">d^1/dz^1(sin(z))</option>
	<option value="27">d^1/dz^1(csc(z))</option>
	<option value="28">d^1/dz^1(cos(z))</option>
	<option value="29">d^1/dz^1(tan(z))</option>
	<option value="30">d^1/dz^1(sinh(z))</option>
	<option value="31">d^1/dz^1(cosh(z))</option>
	<option value="32">d^1/dz^1(tanh(z))</option>
	<option value="33">d^1/dz^1(atanh(z))</option>
	<option value="34">d^1/dz^1(exp(z))</option>
	<option value="35">d^1/dz^1(gamma(z))</option>
	<option value="36">d^1/dz^1(LambertW(0,z))</option>
	<option value="37">d^1/dz^1(erf(z))</option>
	<option value="38">d^1/dz^1(Riemann Zeta(z))</option>
	
	<option value="39">d^2/dz^2(z)</option>
	<option value="40">d^2/dz^2(log(z))</option>
    <option value="41">d^2/dz^2(sqrt(z))</option>
    <option value="42">d^2/dz^2(sin(z))</option>
	<option value="43">d^2/dz^2(csc(z))</option>
	<option value="44">d^2/dz^2(cos(z))</option>
	<option value="45">d^2/dz^2(tan(z))</option>
	<option value="46">d^2/dz^2(sinh(z))</option>
	<option value="47">d^2/dz^2(cosh(z))</option>
	<option value="48">d^2/dz^2(tanh(z))</option>
	<option value="49">d^2/dz^2(atanh(z))</option>
	<option value="50">d^2/dz^2(exp(z))</option>
	<option value="51">d^2/dz^2(gamma(z))</option>
	<option value="52">d^2/dz^2(LambertW(0,z))</option>
	<option value="53">d^2/dz^2(erf(z))</option>
	<option value="54">d^2/dz^2(Riemann Zeta(z))</option>
	
	<option value="55">d^3/dz^3(log(z))</option>
    <option value="56">d^3/dz^3(sqrt(z))</option>
    <option value="57">d^3/dz^3(sin(z))</option>
	<option value="58">d^3/dz^3(csc(z))</option>
	<option value="59">d^3/dz^3(cos(z))</option>
	<option value="60">d^3/dz^3(tan(z))</option>
	<option value="61">d^3/dz^3(sinh(z))</option>
	<option value="62">d^3/dz^3(cosh(z))</option>
	<option value="63">d^3/dz^3(tanh(z))</option>
	<option value="64">d^3/dz^3(exp(z))</option>
	<option value="65">d^3/dz^3(gamma(z))</option>
	<option value="66">d^3/dz^3(LambertW(0,z))</option>
	<option value="67">d^3/dz^3(erf(z))</option>
	<option value="68">d^3/dz^3(Riemann Zeta(z))</option>
	
	<option value="69">d^4/dz^4(log(z))</option>
    <option value="70">d^4/dz^4(sqrt(z))</option>
    <option value="71">d^4/dz^4(sin(z))</option>
	<option value="72">d^4/dz^4(csc(z))</option>
	<option value="73">d^4/dz^4(cos(z))</option>
	<option value="74">d^4/dz^4(tan(z))</option>
	<option value="75">d^4/dz^4(sinh(z))</option>
	<option value="76">d^4/dz^4(cosh(z))</option>
	<option value="77">d^4/dz^4(tanh(z))</option>
	<option value="78">d^4/dz^4(exp(z))</option>
	<option value="79">d^4/dz^4(gamma(z))</option>
	<option value="80">d^4/dz^4(LambertW(0,z))</option>
	<option value="81">d^4/dz^4(erf(z))</option>
	<option value="82">d^4/dz^4(Riemann Zeta(z))</option>
	
	<option value="83">(d^2/dz^2(gamma(log(z))))i</option>
    <option value="84">(d^2/dz^2(gamma(sqrt(z))))i</option>
    <option value="85">(d^2/dz^2(gamma(sin(z))))i</option>
	<option value="86">(d^2/dz^2(gamma(cos(z))))i</option>
	<option value="87">(d^2/dz^2(gamma(tan(z))))i</option>
	<option value="88">(d^2/dz^2(gamma(sinh(z))))i</option>
	<option value="89">(d^2/dz^2(gamma(cosh(z))))i</option>
	<option value="90">(d^2/dz^2(gamma(tanh(z))))i</option>
	<option value="91">(d^2/dz^2(gamma(exp(z))))i</option>
	<option value="92">(d^2/dz^2(gamma(LambertW(0,z))))i</option>
	
</select>

	
	<div id='graph2' style="background-color: rgb(0, 43, 54); width: 1000px; height:1000px"></div>
<!--
<style>
 div#graph2 {
 transform: rotate(-90deg); 
}

</style>
-->	
	<!--  <button onclick="javascript:ClearAnimation();" class="button">Clear</button> -->
</body>

<script>

let clear = false;
function ClearAnimation() {clear = true;}

Graphics.promise.then(function(){

let obj = new Graphics;

let arr1 = [];
let arr2 = [];

buffer = obj.update_array();

let N = 1000;

function compute()
	{
		for (var i = 0; i < N; i++){
			var t = (i-400)/100.;
			arr1[i] = t;
			arr2[i] = obj.update_array(t, 0)[0];
		
		}
	}

compute();

var trace1 = {
  x: arr1,
  y: arr2,
  name: 'REAL',
  mode: 'lines+markers',
  marker: {
    color: 'rgb(17, 157, 255)',
    size: 7,
    line: {
      color: 'rgb(231, 99, 250)',
      width: 2
    }
}
};

var data = [trace1, {}];


var annotations = [
    {
      text: 'Trace type:',
      x: 0,
      y: 1.085,
      yref: 'paper',
      align: 'left',
      showarrow: false
    }
]

var layout1 = {
	//	annotations: annotations,
	
	title: {
    text:'Gamma function',
    font: {
      family: 'Courier New, monospace',
	  color: 'rgb(238, 232, 213)',
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
	
	xaxis: {range: [-4, 6], //for gamma
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'green'
    },
	
	tickformat: ''
	
	},
	
	yaxis: {range: [-30, 30], //for gamma
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'green'
    },
	
	tickformat: ''
	
	},
	
	paper_bgcolor: 'rgba(0,0,0,0)',
	plot_bgcolor: 'rgba(0,0,0,0)'
}


Plotly.plot('graph1', data, layout1);

});

function plot_conformal_map(formula)
{

Graphics.promise.then(function() {

var obj = new Graphics;

var layout = {

	title: {
    //text:'(d^2/dz^2(gamma(log(z)))) i',
    font: {
      family: 'Courier New, monospace',
	  color: 'rgb(238, 232, 213)',
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
	xaxis: {range: [2*-Math.PI , 2*Math.PI],
	uirevision:'true',
	aspectmode: 'manual',
	showtickprefix: 'last',
    tickprefix: 'REAL ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'REAL AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [2*-Math.PI , 2*Math.PI],
	uirevision:'true',
	aspectmode: 'manual',
	showtickprefix: 'last',
    tickprefix: 'IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'IMAG AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	paper_bgcolor: 'rgba(0,0,0,0)',
	plot_bgcolor: 'rgba(0,0,0,0)'
}

	var complex_array = [];
	
	//grid_spacing = 0.25;
	//int n_grid_lines = (2*max)/grid_spacing + 1;
	
	let N = 200;
	
	function compute_conformal_map()
	{	
		complex_array = obj.conformal_map(formula,10);		
	}

	compute_conformal_map();
	

	var real = complex_array.slice(0,  N*9*2);
	var imag = complex_array.slice(N*9*2,complex_array.size);

	var trace1 = {
	
	x: real,
	y: imag,
	name: '',
	
	mode: 'markers',
	marker: {
		color: 'rgb(17, 157, 255)',
		size: 6,
		line: {
      color: 'rgb(231, 99, 250)',
      width: 2}}
	};

	var data = [trace1,{}];
	
	Plotly.react('graph2', data, layout);

})}

plot_conformal_map(1);

var menu = document.getElementById("change_formula1");
menu.addEventListener("change", generateData);

function generateData(event) {

 var formula = parseInt(menu.value);
 plot_conformal_map(formula);
 
};


</script>

<script>
	
				// Create anchor element. 
                var a1 = document.createElement('a');
				var a2 = document.createElement('a');
				var a3 = document.createElement('a');
				var a4 = document.createElement('a');  				
                
                // Create the text node for anchor element. 
                var link1 = document.createTextNode("Multicomplex_number"); 
				var link2 = document.createTextNode("Numerical differentiation");
				var link3 = document.createTextNode("Spherical harmonics");
				var link4 = document.createTextNode("Residue theorem"); 				

                // Append the text node to anchor element. 
				a1.appendChild(link1);
				a1.style.fontSize = "25px"; 
				a1.style.color = "rgb(238, 232, 213)";
				
				a2.appendChild(link2);
				a2.style.fontSize = "25px"; 
				a2.style.color = "rgb(238, 232, 213)";
				
				a3.appendChild(link3);
				a3.style.fontSize = "25px"; 
				a3.style.color = "rgb(238, 232, 213)";
				
				a4.appendChild(link4);
				a4.style.fontSize = "25px"; 
				a4.style.color = "rgb(238, 232, 213)";
				
				 //document.write("<br>");
				a1.href = 'https://en.wikipedia.org/wiki/Bicomplex_number'; 				
				document.body.appendChild(a1); 
				 document.write("<br>");
				a2.href = 'https://en.wikipedia.org/wiki/Numerical_differentiation';				 
				document.body.appendChild(a2);
				 document.write("<br>");
				a3.href = 'https://en.wikipedia.org/wiki/Spherical_harmonics';
				document.body.appendChild(a3);	
				 document.write("<br>");		
				a4.href = 'https://en.wikipedia.org/wiki/Residue_theorem';				 
				document.body.appendChild(a4);	
				
				
		
	</script>
	
<br><br>

<script src='FileSaver.js'></script>

<form role="form">
  <h1>Save 3D data to file</h1>

  <div class="form-group">
  <label for="input-fileName"> <h2> File name</label>
    <input type="text" class="form-control" id="input-fileName" value="Point cloud XYZ File" placeholder="Enter file name">
	<button id="btn-save" type="submit" class="btn-primary">Save to file</button>
		
  </div></h2>
 </form> 
  
  <label for="avatar"><h1>Retrieve 3D data from file</h1></label>
 <h1>
<input type="file" name='file' class="btn-primary" accept=".xyz">
</h1>
<br>

<select id="change_formula2" class="dropbtn"></select>
 
<script>

$('#change_formula1 option').clone().appendTo('#change_formula2');

</script>
	
<div id='graph3' style="background-color: rgb(0, 43, 54); width: 1600px; height:800px"></div>

<script>

var layout = {
	grid: {rows: 1, columns: 2, pattern: 'independent'},
	
	title: {
    //text:'(d^2/dz^2(gamma(log(z)))) i',
    font: {
      family: 'Courier New, monospace',
	  color: 'rgb(238, 232, 213)',
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
	
	xaxis: {range: [-2.1, 2.1],
	uirevision:'true',
	showtickprefix: 'last',
    tickprefix: 'REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	xaxis2: {range: [-2.1, 2.1],
	uirevision:'true',
	showtickprefix: 'last',
    tickprefix: 'REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [-2.1, 2.1],
	uirevision:'true',
	showtickprefix: 'last',
    tickprefix: 'IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis2: {range: [-2.1, 2.1],
	uirevision:'true',
	showtickprefix: 'last',
    tickprefix: 'IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	paper_bgcolor: 'rgba(0,0,0,0)',
	plot_bgcolor: 'rgba(0,0,0,0)'
}

	let X = [], Y = [], Z = [];


function plot_conformal_map2(formula, graph)
{

var layout3d = {
	
	scene7: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: { x: 1, y: 1, z: 1 },
    domain: {
            x: [0.0, 0.5],
            y: [1.0, 1.0]
        },
		
	xaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
		
	showtickprefix: 'last',
    //tickprefix: 'REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    //tickprefix: 'REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'X AXIS',
	
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    //tickprefix: 'IMAG.REAL ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	},
	
	scene1: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: { x: 1, y: 1, z: 1 },
    domain: {
            x: [0.0, 0.5],
            y: [1.0, 1.0]
        },
		
	xaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
		
	showtickprefix: 'last',
    tickprefix: 'REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'Y AXIS',
	
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [2*-Math.PI , 2*Math.PI],

	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'IMAG.REAL ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	
	
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	},
		
    scene2: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: { x: 1, y: 1, z: 1 },
        domain: {
            x: [0.5, 1.0],
            y: [1.0, 1.0]
        },
		
	xaxis: {range: [2*-Math.PI , 2*Math.PI],
	
	showspikes: false,
	
	//backgroundcolor: "rgb(0, 0, 0)",
	//showbackground: true,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	//linecolor: "rgb(255, 255, 255)",
	//linewidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [2*-Math.PI , 2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [2*-Math.PI , 2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,	
	
	showtickprefix: 'last',
    tickprefix: 'IMAG.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
		},
		
	scene3: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: {
     x: 1, y: 1, z: 1,
    },
        domain: {
            x: [0.0, 0.5],
            y: [0.5, 1.0]
        },
		
	xaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'REAL.REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,

	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.IMAG.REAL ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
		},
		
	scene4: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: {
     x: 1, y: 1, z: 1,
    },
        domain: {
            x: [0.5, 1.0],
            y: [0.5, 1.0]
        },
		
	xaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'REAL.REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'REAL.IMAG.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
		},
		
	scene5: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: {
     x: 1, y: 1, z: 1,
    },
        domain: {
            x: [0.0, 0.5],
            y: [0.0, 0.5]
        },
		
	xaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'IMAG.REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'IMAG.REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,

	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'IMAG.IMAG.REAL ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
		},
	
	scene6: 
	{
	uirevision:'true',
	aspectmode: 'manual',
	aspectratio: {
     x: 1, y: 1, z: 1,
    },
        domain: {
            x: [0.5, 1.0],
            y: [0.0, 0.5]
        },
		
	xaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	
	showspikes: false,
	
	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,
	
	showtickprefix: 'last',
    tickprefix: 'IMAG.REAL.REAL ',
	
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'X AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	},
	
	yaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,

	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'IMAG.REAL.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Y AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
	
	zaxis: {range: [Math.PI*2*-Math.PI , Math.PI*2*Math.PI],
	showspikes: false,

	zerolinecolor: "rgb(255, 255, 255)",
	zerolinewidth: 1,
	
	gridcolor: "rgb(255, 255, 255)",
	gridwidth: 1,

	showtickprefix: 'last',
    tickprefix: 'IMAG.IMAG.IMAG ',
	tickfont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    },
	
	tickformat: '',
	title: 'Z AXIS',
	 titlefont: {
      family: 'Old Standard TT, serif',
      size: 14,
      color: 'lightgrey'
    }
	
	},
		},
	
	title: {
    //text:'(d^2/dz^2(gamma(log(z)))) i',
    font: {
      family: 'Courier New, monospace',
	  color: 'rgb(238, 232, 213)',
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
	
	paper_bgcolor: 'rgba(0,0,0,0)',
	plot_bgcolor: 'rgba(0,0,0,0)'
}

Graphics.promise.then(function() {

		var obj = new Graphics;

		var complex_array1 = [];
		var complex_array2 = [];
	
		var complex_array3 = [];
		var complex_array4 = [];
		var complex_array5 = [];
		var complex_array6 = [];

		let N = 200;
	
		function compute_conformal_map()
		{	
			if(graph === 'graph3'){

			X = obj.conformal_map(formula, 18); // 11 15
			Y = obj.conformal_map(formula, 19); // 12 16
			Z = obj.conformal_map(formula, 20); // 13 17
			
			
			//11 SphericalHarmonic x
			//12 SphericalHarmonic y, Pseudosphere y
			//13 SphericalHarmonic z, Pseudosphere z
			//14 Pseudosphere x
			
			//15 Breather surface x
			//16 Breather surface y
			//17 Breather surface z
		
			//18 Rosenbrock x
			//19 Rosenbrock y
			//20 Rosenbrock z
			
			complex_array1 = obj.conformal_map(formula, 0);
			complex_array2 = obj.conformal_map(formula, 1);
			}
		
			if(graph === 'graph4'){
				complex_array3 = obj.conformal_map(formula, 2);
				complex_array4 = obj.conformal_map(formula, 3);
				complex_array5 = obj.conformal_map(formula, 4);
				complex_array6 = obj.conformal_map(formula, 5);	
			}
		}
	
		if(graph !== 'graph_from_file')
			compute_conformal_map();
	
		else {
			complex_array1 = obj.conformal_map(formula, 0);
			complex_array2 = obj.conformal_map(formula, 1);
		}
		
		
		var real1 = complex_array1.slice(0,  N*9*2);
		var imag1 = complex_array1.slice(N*9*2,complex_array1.size);
	
		var real2 = complex_array2.slice(0,  N*9*2);
		var imag2 = complex_array2.slice(N*9*2,complex_array2.size);
	
		////
	
		var real3 = complex_array3.slice(0,  N*9*2);
		var imag3 = complex_array3.slice(N*9*2,complex_array3.size);
	
		var real4 = complex_array4.slice(0,  N*9*2);
		var imag4 = complex_array4.slice(N*9*2,complex_array4.size);
	
		var real5 = complex_array5.slice(0,  N*9*2);
		var imag5 = complex_array5.slice(N*9*2,complex_array5.size);
	
		var real6 = complex_array6.slice(0,  N*9*2);
		var imag6 = complex_array6.slice(N*9*2,complex_array6.size);

		var trace1_2d = {
		x: real1,
		y: imag1,
		xaxis: 'x',
		yaxis: 'y',
		type: 'scatter',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}}
		};

		var trace2_2d = {
		x: real2,
		y: imag2,
		xaxis: 'x2',
		yaxis: 'y2',
		type: 'scatter',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}}
		};
	
		///////////
	
		var trace1_3d = {
		
		//x: Y,
		//y: X,
		//z: Z,
		//scene: "scene7",
		
		x: real1,
		y: imag1,
		z: real2,
		scene: "scene1",
		
		type: 'scatter3d',
		hovertemplate: 'x: %{y:.5f}<br>' + 'y: %{x:.5f}<br>' + 'z: %{z:.5f}',
	
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}} 
		};

		var trace2_3d = {
		x: real1,
		y: imag1,
		z: imag2,
		scene: "scene2",
	
		type: 'scatter3d',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
		size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}} 
		};
	
		/////
	
		var trace3_3d = {
		x: real3,
		y: imag3,
		z: real4,
		scene: "scene3",
	
		type: 'scatter3d',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}} 
		};
	
		var trace4_3d = {
		x: real3,
		y: imag3,
		z: imag4,
		scene: "scene4",
	
		type: 'scatter3d',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}} 
		};
	
		var trace5_3d = {
		x: real5,
		y: imag5,
		z: real6,
		scene: "scene5",
	
		type: 'scatter3d',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}}
		};
	
		var trace6_3d = {
		x: real5,
		y: imag5,
		z: imag6,
		scene: "scene6",
	
		type: 'scatter3d',
		name: '',
		mode: 'markers',
		marker: {
			color: 'rgb(17, 157, 255)',
			size: 6,
			line: {
		color: 'rgb(231, 99, 250)',
		width: 2}} 
		};
	
		//var data = [trace1_2d,trace2_2d];
		//Plotly.newPlot('graph', data, layout);
	
		var data1 = [trace1_3d,trace2_3d];	
		var data2 = [trace3_3d,trace4_3d,trace5_3d,trace6_3d];
	
		if(graph === 'graph3'){
	
		Plotly.react(graph, data1, layout3d);}
		
		if(graph === 'graph_from_file'){
	
		Plotly.react('graph3', data1, layout3d);}
	
		if(graph === 'graph4'){
	
		Plotly.react(graph, data2, layout3d);}
	
	}
)}


plot_conformal_map2(1, 'graph3');

var menu2 = document.getElementById("change_formula2");

function generateData(event) {

 var formula = parseInt(menu2.value);
 plot_conformal_map2(formula, 'graph3');
 
};

menu2.addEventListener("change", generateData);


</script>


<select id="change_formula3" class="dropbtn"></select>

<br>
<div id='graph4' style="background-color: rgb(0, 43, 54); width: 1600px; height:1600px"></div>

<script>

function initplot()
{
	
	$('#change_formula2 option').clone().appendTo('#change_formula3');

	var menu = document.getElementById("change_formula3");	
	
	function generateData(event) {

		var formula = parseInt(menu.value);
		plot_conformal_map2(formula, 'graph4');
	};
	
	menu.addEventListener("change", generateData);
	
};

initplot();

plot_conformal_map2(1, 'graph4');


$("#btn-save").click( function() {
	event.preventDefault();
	//var text = $("#textarea").val();
  
	var text=[];
	text += X.length.toString() + "\n";
	text += "# spherical harmonic" + "\n";

	for (i = 0; i < X.length; i++) {
		text += X[i] + " ";
		text += Y[i] + " ";
		text += Z[i] + "\n";
	} 
	
	var filename = $("#input-fileName").val()
	var blob = new Blob([text], {type: "text/plain;charset=utf-8"});
	saveAs(blob, filename+".xyz");
	
});


$("input[name='file']").on("change", function(){

    var files = !!this.files ? this.files : [];

    if ( !files.length || !window.FileReader ) return;

 
    var reader = new FileReader();
    
    reader.readAsBinaryString( files[0] );
    
	//var regex = /[+-]?\d+(?:\.\d+)?(?:e[+-]?\d+)?/g;
	var regex = /[+-]?(\d+(\.\d+)?|\.\d+)([eE][+-]?\d+)?/g;
	//[+-]?(\d+(\.\d+)?|\.\d+)([eE][+-]?\d+)?

	reader.onload = function(event){
	
	X = [];
	Y = [];
	Z = [];
	
	var k = 0;
	
	lineByLine = event.target.result.split("\n");	
	
	for (i = 2; i < lineByLine.length; i++) {
		
		while (match = regex.exec(lineByLine[i])) {

				var t = parseFloat(match);
				if(k==0) X.push(t); 
				else if(k==1) Y.push(t); 
				else Z.push(t);
				k++;
			}
			
			k=0;
		}
		
		plot_conformal_map2(1,'graph_from_file');
    }
});

</script>

</html>





